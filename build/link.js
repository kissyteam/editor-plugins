define("kg/editor-plugins/1.1.3/link",["./button","./bubble","util","editor","./link/utils","./dialog-loader","node"],function(e,t,i){function l(e){return e=b(e),e.closest("a",void 0)}function n(e){this.config=e||{}}e("./button"),e("./bubble");var o=e("util"),r=e("editor"),s=e("./link/utils"),u=e("./dialog-loader"),b=e("node"),a='<a href=""  target="_blank" class="{prefixCls}editor-bubble-url">在新窗口查看</a>  –   <span class="{prefixCls}editor-bubble-link {prefixCls}editor-bubble-change">编辑</span>   |    <span class="{prefixCls}editor-bubble-link {prefixCls}editor-bubble-remove">去除</span>';n.prototype={pluginRenderUI:function(e){function t(t){u.useDialog(e,"link",n.config,t)}var i=e.get("prefixCls");e.addButton("link",{tooltip:"插入链接",listeners:{click:function(){t()}},mode:r.Mode.WYSIWYG_MODE});var n=this;e.addBubble("link",l,{listeners:{afterRenderUI:function(){var l=this,n=l.get("contentEl");n.html(o.substitute(a,{prefixCls:i}));var u=n.one("."+i+"editor-bubble-url"),b=n.one("."+i+"editor-bubble-change"),d=n.one("."+i+"editor-bubble-remove");r.Utils.preventFocus(n),b.on("click",function(e){t(l.get("editorSelectedEl")),e.halt()}),d.on("click",function(t){s.removeLink(e,l.get("editorSelectedEl")),t.halt()}),l.on("show",function(){var e=l.get("editorSelectedEl");if(e){var t=e.attr(s.savedHref)||e.attr("href");u.html(t),u.attr("href",t)}})}}})}},i.exports=n});