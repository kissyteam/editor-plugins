define("kg/editor-plugins/1.1.3/code/dialog",["util","editor","menubutton","dom","../dialog","node","ua"],function(e,t,i){function o(e){this.editor=e}var a=e("util"),l=e("editor"),s=e("menubutton"),r=l.XHTML_DTD,d=e("dom").NodeType,n=l.Walker.whitespaces(!0),c=e("../dialog"),p=e("node"),f=e("ua"),u=[["ActionScript3","as3"],["Bash/Shell","bash"],["C/C++","cpp"],["Css","css"],["CodeFunction","cf"],["C#","c#"],["Delphi","delphi"],["Diff","diff"],["Erlang","erlang"],["Groovy","groovy"],["HTML","html"],["Java","java"],["JavaFx","jfx"],["Javascript","js"],["Perl","pl"],["Php","php"],["Plain Text","plain"],["PowerShell","ps"],["Python","python"],["Ruby","ruby"],["Scala","scala"],["Sql","sql"],["Vb","vb"],["Xml","xml"]],h='<div class="{prefixCls}code-wrap"><table class="{prefixCls}code-table"><tr><td class="{prefixCls}code-label"><label for="ks-editor-code-type">类型：</label></td><td class="{prefixCls}code-content"><select id="ks-editor-code-type"  class="{prefixCls}code-type">'+a.map(u,function(e){return'<option value="'+e[1]+'">'+e[0]+"</option>"})+'</select></td></tr><tr><td><label for="ks-editor-code-textarea">代码：</label></td><td><textarea id="ks-editor-code-textarea"  class="{prefixCls}code-textarea {prefixCls}input"></textarea></td></tr></table></div>',g='<div class="{prefixCls}code-table-action"><a href="javascript:void(\'插入\')" class="{prefixCls}code-insert {prefixCls}button">插入</a><a href="javascript:void(\'取消\')" class="{prefixCls}code-cancel {prefixCls}button">取消</a></td></div>',x='<pre class="prettyprint ks-editor-code brush:{type};toolbar:false;">{code}</pre>';a.augment(o,{initDialog:function(){var e,t,i=this,o=i.editor.get("prefixCls")+"editor-";t=i.dialog=new c({width:500,mask:!0,headerContent:"插入代码",bodyContent:a.substitute(h,{prefixCls:o}),footerContent:a.substitute(g,{prefixCls:o})}).render(),e=t.get("el"),i.insert=e.one("."+o+"code-insert"),i.cancel=e.one("."+o+"code-cancel"),i.type=s.Select.decorate(e.one("."+o+"code-type"),{prefixCls:o+"big-",width:150,menuCfg:{prefixCls:o,height:320,render:t.get("contentEl")}}),i.code=e.one("."+o+"code-textarea"),i.insert.on("click",i._insert,i),i.cancel.on("click",i.hide,i)},hide:function(){this.dialog.hide()},_insert:function(){var e,t=this,i=t.editor,o=t.code;if(!a.trim(e=o.val()))return void alert("请输入代码!");var l=p(a.substitute(x,{type:t.type.get("value"),code:a.escapeHtml(e)}),i.get("document")[0]);t.dialog.hide(),i.insertElement(l);var s=i.getSelection().getRanges()[0],c=l.next(n,1),u=c&&c[0].nodeType===d.ELEMENT_NODE&&c.nodeName();u&&r.$block[u]&&r[u]["#text"]||(c=p("<p></p>",i.get("document")[0]),f.ie||c._4eAppendBogus(),l.after(c)),s.moveToElementEditablePosition(c),i.getSelection().selectRanges([s])},show:function(){this.dialog||this.initDialog(),this.dialog.show()}}),i.exports=o});