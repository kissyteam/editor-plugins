define("kg/editor-plugins/1.1.7/color/btn",["editor","../button","../overlay","../dialog-loader","node","util"],function(o,e,t){function r(){l='<div class="{prefixCls}editor-color-panel"><a class="{prefixCls}editor-color-remove" href="javascript:void(\'清除\');">清除</a>';for(var o=0;3>o;o++){l+='<div class="{prefixCls}editor-color-palette"><table>';for(var e=u[o],t=e.length/8,r=0;t>r;r++){l+="<tr>";for(var i=0;8>i;i++){var n="#"+e[8*r+i];l+="<td>",l+='<a href="javascript:void(0);" class="{prefixCls}editor-color-a" style="background-color:'+n+'"></a>',l+="</td>"}l+="</tr>"}l+="</table></div>"}l+='<div><a class="{prefixCls}editor-button {prefixCls}editor-color-others ks-inline-block">其他颜色</a></div></div>'}function i(o,e,t){setTimeout(function(){o.execCommand(e,t)},0)}var l,n=o("editor"),c=o("../button"),a=o("../overlay"),d=o("../dialog-loader"),s=o("node"),C=o("util"),u=[["000","444","666","999","CCC","EEE","F3F3F3","FFF"],["F00","F90","FF0","0F0","0FF","00F","90F","F0F"],["F4CCCC","FCE5CD","FFF2CC","D9EAD3","D0E0E3","CFE2F3","D9D2E9","EAD1DC","EA9999","F9CB9C","FFE599","B6D7A8","A2C4C9","9FC5E8","B4A7D6","D5A6BD","E06666","F6B26B","FFD966","93C47D","76A5AF","6FA8DC","8E7CC3","C27BAD","CC0000","E69138","F1C232","6AA84F","45818E","3D85C6","674EA7","A64D79","990000","B45F06","BF9000","38761D","134F5C","0B5394","351C75","741B47","660000","783F04","7F6000","274E13","0C343D","073763","20124D","4C1130"]];r();var f=c.extend({initializer:function(){var o=this;o.on("blur",function(){setTimeout(function(){o.colorWin&&o.colorWin.hide()},150)}),o.on("click",function(){var e=o.get("checked");e?o._prepare():o.colorWin&&o.colorWin.hide()})},_prepare:function(){var o,e=this,t=e.get("editor"),r=t.get("prefixCls");e.colorWin=new a({elAttrs:{tabindex:0},elCls:r+"editor-popup",content:C.substitute(l,{prefixCls:r}),width:172,zIndex:n.baseZIndex(n.ZIndexManager.POPUP_MENU)}).render();var i=e.colorWin;o=i.get("contentEl"),o.on("click",e._selectColor,e),i.on("hide",function(){e.set("checked",!1)});var c=o.one("."+r+"editor-color-others");c.on("click",function(o){o.halt(),i.hide(),d.useDialog(t,"color",void 0,e)}),e._prepare=e._show,e._show()},_show:function(){var o=this,e=o.get("el"),t=o.colorWin;t.set("align",{node:e,points:["bl","tl"],offset:[0,2],overflow:{adjustX:1,adjustY:1}}),t.show()},_selectColor:function(o){o.halt();var e=this,t=e.get("editor"),r=t.get("prefixCls"),i=s(o.target);i.hasClass(r+"editor-color-a")?e.fire("selectColor",{color:i.style("background-color")}):i.hasClass(r+"editor-color-remove")&&e.fire("selectColor",{color:null})},destructor:function(){var o=this;o.colorWin&&o.colorWin.destroy()}},{ATTRS:{checkable:{value:!0},mode:{value:n.Mode.WYSIWYG_MODE}}}),F='<div class="{icon}"></div><div style="background-color:{defaultColor}" class="{indicator}"></div>';f.init=function(o,e){var t=o.get("prefixCls")+"editor-toolbar-",r=e.cmdType,l=e.defaultColor,c=e.tooltip,a=o.addButton(r,{elCls:r+"Btn",content:C.substitute(F,{defaultColor:l,icon:t+"item "+t+r,indicator:t+"color-indicator"}),mode:n.Mode.WYSIWYG_MODE,tooltip:"设置"+c}),d=o.addButton(r+"Arrow",{tooltip:"选择并设置"+c,elCls:r+"ArrowBtn"},f),s=a.get("el").one("."+t+"color-indicator");d.on("selectColor",function(e){s.css("background-color",e.color||l),i(o,r,e.color)}),a.on("click",function(){i(o,r,s.style("background-color"))})},t.exports=f});