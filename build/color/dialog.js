define("kg/editor-plugins/1.1.10/color/dialog",["editor","util","../dialog","dom","node"],function(o,e,t){function r(o){if(d.isArray(o))return o;var e=RegExp;return/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.test(o)?s([e.$1,e.$2,e.$3],function(o){return parseInt(o,16)}):/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(o)?s([e.$1,e.$2,e.$3],function(o){return parseInt(o+o,16)}):/^rgb\((.*),(.*),(.*)\)$/i.test(o)?s([e.$1,e.$2,e.$3],function(o){return o.indexOf("%")>0?2.55*parseFloat(o,10):0|o}):void 0}function i(o){o="0"+o;var e=o.length;return o.slice(e-2,e)}function n(o){return o=r(o),"#"+i(o[0].toString(16))+i(o[1].toString(16))+i(o[2].toString(16))}function a(o){this.editor=o,this._init()}var l=o("editor"),d=o("util"),c=o("../dialog"),s=d.map,u=o("dom"),f=o("node"),v=function(){function o(o,t,r){var i=[];o=e(o),t=e(t);for(var n=(t[0]-o[0])/r,a=(t[1]-o[1])/r,l=(t[2]-o[2])/r,d=0,c=o[0],u=o[1],f=o[2];r>d;d++)i[d]=[c,u,f],c+=n,u+=a,f+=l;return i[d]=t,s(i,function(o){return s(o,function(o){return Math.min(Math.max(0,Math.floor(o)),255)})})}function e(o){var e=r(o);if(void 0===e){t||(t=document.createElement("textarea"),t.style.display="none",u.prepend(t,document.body));try{t.style.color=o}catch(i){return[0,0,0]}document.defaultView?e=r(document.defaultView.getComputedStyle(t,null).color):(o=t.createTextRange().queryCommandValue("ForeColor"),e=[255&o,(65280&o)>>>8,(16711680&o)>>>16])}return e}var t;return function(e,t){var r=[],i=e.length;if(void 0===t&&(t=20),1===i)r=o(e[0],e[0],t);else if(i>1)for(var n=0,a=i-1;a>n;n++){var l=t[n]||t,d=o(e[n],e[n+1],l);a-1>n&&d.pop(),r=r.concat(d)}return r}}(),p="<ul>"+s(v(["red","orange","yellow","green","cyan","blue","purple"],5),function(o){return s(v(["white","rgb("+o.join(",")+")","black"],5),function(o){return'<li><a style="background-color:'+n(o)+'" href="#"></a></li>'}).join("")}).join("</ul><ul>")+"</ul>",g='<div class="{prefixCls}editor-color-advanced-picker"><div class="ks-clear"><div class="{prefixCls}editor-color-advanced-picker-left">'+p+'</div><div class="{prefixCls}editor-color-advanced-picker-right"></div></div><div style="padding:10px;"><label>颜色值： <input style="width:100px" class="{prefixCls}editor-color-advanced-value"/></label><span class="{prefixCls}editor-color-advanced-indicator"></span></div></div>',h='<div style="padding:5px 20px 20px;"><a class="{prefixCls}editor-button {prefixCls}editor-color-advanced-ok ks-inline-block">确定</a>&nbsp;&nbsp;&nbsp;<a class="{prefixCls}editor-button  {prefixCls}editor-color-advanced-cancel ks-inline-block">取消</a></div>',b=l.Utils.addRes,x=l.Utils.destroyRes;d.augment(a,{_init:function(){var o=this,e=o.editor,t=e.get("prefixCls");o.dialog=new c({mask:!0,headerContent:"颜色拾取器",bodyContent:d.substitute(g,{prefixCls:t}),footerContent:d.substitute(h,{prefixCls:t}),width:"550px"}).render();var r=o.dialog,i=r.get("body"),a=r.get("footer"),l=i.one("."+t+"editor-color-advanced-indicator"),s=i.one("."+t+"editor-color-advanced-value"),u=i.one("."+t+"editor-color-advanced-picker-left"),v=a.one("."+t+"editor-color-advanced-ok"),p=a.one("."+t+"editor-color-advanced-cancel");v.on("click",function(e){var t=d.trim(s.val()),r=o.colorButtonArrow;return/^#([a-f0-9]{1,2}){3,3}$/i.test(t)?(o.hide(),r.fire("selectColor",{color:s.val()}),void e.halt()):void alert("请输入正确的颜色代码")}),s.on("change",function(){var o=d.trim(s.val());return/^#([a-f0-9]{1,2}){3,3}$/i.test(o)?void l.css("background-color",o):void alert("请输入正确的颜色代码")}),p.on("click",function(e){o.hide(),e.halt()}),i.on("click",function(e){e.halt();var t=f(e.target);if("a"===t.nodeName()){var r=n(t.css("background-color"));u.contains(t)&&o._detailColor(r),s.val(r),l.css("background-color",r)}}),b.call(o,v,s,p,i,o.dialog);var x="#FF9900";o._detailColor(x),s.val(x),l.css("background-color",x)},_detailColor:function(o){var e=this,t=e.dialog,r=t.get("body"),i=e.editor,a=i.get("prefixCls"),l=r.one("."+a+"editor-color-advanced-picker-right");l.html(s(v(["#ffffff",o,"#000000"],40),function(o){return'<a style="background-color:'+n(o)+'"></a>'}).join(""))},show:function(o){this.colorButtonArrow=o,this.dialog.show()},hide:function(){this.dialog.hide()},destroy:function(){x.call(this)}}),t.exports=a});