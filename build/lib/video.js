KISSY.add('editor-plugins/lib/video',["editor","./flash-common/utils","./flash-common/base-class","./fake-objects","./button"],function(S ,require, exports, module) {function e(e){this.config=e}var t=require("editor"),r=require("./flash-common/utils"),i=require("./flash-common/base-class"),o=require("./fake-objects");require("./button");var n="ke_video",a="video";e.prototype={pluginRenderUI:function(e){function u(e){for(var t=0;t<d.length;t++){var r=d[t];if(r.reg.test(e))return r}return void 0}o.init(e);var s=e.htmlDataProcessor,l=s&&s.dataFilter,d=[],c=this.config;c.providers&&d.push.apply(d,c.providers),c.getProvider=u,l&&l.addRules({tags:{object:function(e){var t,i=e.getAttribute("classid"),o=e.childNodes;if(!i){for(t=0;t<o.length;t++)if("embed"===o[t].nodeName){if(!r.isFlashEmbed(o[t]))return null;if(u(o[t].getAttribute("src")))return s.createFakeParserElement(e,n,a,!0)}return null}for(t=0;t<o.length;t++){var l=o[t];if("param"===l.nodeName&&"movie"===l.getAttribute("name").toLowerCase()&&u(l.getAttribute("value")||l.getAttribute("VALUE")))return s.createFakeParserElement(e,n,a,!0)}},embed:function(e){return r.isFlashEmbed(e)?u(e.getAttribute("src"))?s.createFakeParserElement(e,n,a,!0):void 0:null}}},4);var f=new i({editor:e,cls:n,type:a,pluginConfig:this.config,bubbleId:"video",contextMenuId:"video",contextMenuHandlers:{"视频属性":function(){var e=this.get("editorSelectedEl");e&&f.show(e)}}});e.addButton("video",{tooltip:"插入视频",listeners:{click:function(){f.show()}},mode:t.Mode.WYSIWYG_MODE})}},module.exports=e;});