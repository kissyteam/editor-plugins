KISSY.add('editor-plugins/lib/font/cmd',["editor"],function(S ,require, exports, module) {function e(e,t){var n=e.nodeName();if(t.element!==n)return!1;var a,r=t.styles;for(var o in r)if(a=e.style(o))return a;for(var m=t.overrides,i=0;i<m.length;i++){var d=m[i];if(d.element===n){var c=d.attributes;for(var u in c)if(a=e.attr(u))return a}}return!1}function t(t,n){var a,r,o,m=t.elements;for(r=0;r<m.length;r++)if(a=m[r],!(t.block&&a[0]===t.block[0]||t.blockLimit&&a[0]===t.blockLimit[0])&&(o=e(a,n),o!==!1))return o;return o}var n=require("editor"),a=n.Utils.getQueryCmd;module.exports={addButtonCmd:function(e,t,r){var o=a(t);e.hasCommand(t)||(e.addCommand(t,{exec:function(e){var n=e.get("document")[0];e.execCommand("save");var a=e.queryCommandValue(t);a?r.remove(n):r.apply(n),e.execCommand("save"),e.notifySelectionChange()}}),e.addCommand(o,{exec:function(e){var t=e.getSelection();if(t&&!t.isInvalid){var a=t.getStartElement(),o=new n.ElementPath(a);return r.checkActive(o)}}}))},addSelectCmd:function(e,r,o){var m=a(r);e.hasCommand(r)||(e.addCommand(r,{exec:function(e,t){e.focus();var a=e.queryCommandValue(r)||"",m=new n.Style(o,{value:t}),i=e.get("document")[0];e.execCommand("save"),t.toLowerCase()===a.toLowerCase()?m.remove(i):m.apply(i),e.execCommand("save")}}),e.addCommand(m,{exec:function(e){var a=e.getSelection();if(a&&!a.isInvalid){var r=a.getStartElement(),m=new n.ElementPath(r);return t(m,o)}}}))}};});