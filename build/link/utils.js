define("kg/editor-plugins/1.1.8/link/utils",["editor","node"],function(e,t,a){function n(e){for(var t=e.attributes,a={},n=0;n<t.length;n++){var r=t[n];r.specified&&(a[r.name]=r.value)}return e.style.cssText&&(a.style=e.style.cssText),a}function r(e,t){e.execCommand("save");var a=e.getSelection(),r=a.getRanges()[0];if(r&&r.collapsed){var o=a.createBookmarks();t._4eRemove(!0),a.selectBookmarks(o)}else if(r){var s=n(t[0]);new l(v,s).remove(e.get("document")[0])}e.execCommand("save"),e.notifySelectionChange()}function o(e,t,a){if(t[c]=t.href,a)e.execCommand("save"),a.attr(t);else{var n=e.getSelection(),r=n&&n.getRanges()[0];if(!r||r.collapsed){var o=new i("<a>"+t.href+"</a>",t,e.get("document")[0]);e.insertElement(o)}else{e.execCommand("save");var s=new l(v,t);s.apply(e.get("document")[0])}}e.execCommand("save"),e.notifySelectionChange()}var s=e("editor"),i=e("node"),l=s.Style,c="_ke_saved_href",v={element:"a",attributes:{href:"#(href)",title:"#(title)",_ke_saved_href:"#(_ke_saved_href)",target:"#(target)"}};a.exports={removeLink:r,applyLink:o,savedHref:c}});