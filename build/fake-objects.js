define("kg/editor-plugins/1.1.7/fake-objects",["editor","html-parser","util","node","dom"],function(e,t,r){var i=e("editor"),a=e("html-parser"),l=e("util"),n=e("node"),s=e("dom"),d=i.Utils,_=d.debugUrl("theme/spacer.gif");i.addMembers({createFakeElement:function(e,t,r,i,a,s){var d=e.attr("style")||"";e.attr("width")&&(d="width:"+e.attr("width")+"px;"+d),e.attr("height")&&(d="height:"+e.attr("height")+"px;"+d);var o=this,h=l.trim(e.attr("class")),u={"class":t+" "+h,src:_,_ke_real_element:encodeURIComponent(a||e.outerHtml()),_ke_real_node_type:e[0].nodeType,style:d};return s&&(delete s.width,delete s.height,l.mix(u,s,!1)),r&&(u._ke_real_element_type=r),i&&(u._ke_resizable=i),new n("<img/>",u,o.get("document")[0])},restoreRealElement:function(e){if(parseInt(e.attr("_ke_real_node_type"),10)!==s.NodeType.ELEMENT_NODE)return null;var t=l.urlDecode(e.attr("_ke_real_element")),r=n("<div>",this.get("document")[0]);return r.html(t),r.first().remove()}});var o={tags:{$:function(e){var t,r=e.getAttribute("_ke_real_element");r&&(t=new a.Parser(l.urlDecode(r)).parse());var i=t&&t.childNodes[0];if(i){var n=e.getAttribute("style");if(n){var s=/(?:^|\s)width\s*:\s*(\d+)/i.exec(n),d=s&&s[1];s=/(?:^|\s)height\s*:\s*(\d+)/i.exec(n);var _=s&&s[1];d&&i.setAttribute("width",d),_&&i.setAttribute("height",_)}return i}}}};r.exports={init:function(e){var t=e.htmlDataProcessor,r=t&&t.htmlFilter;t.createFakeParserElement||(r&&r.addRules(o),l.mix(t,{restoreRealElement:function(t){if(parseInt(t.attr("_ke_real_node_type"),10)!==s.NodeType.ELEMENT_NODE)return null;var r=l.urlDecode(t.attr("_ke_real_element")),i=n("<div>",e.get("document")[0]);return i.html(r),i.first().remove()},createFakeParserElement:function(e,t,r,i,n){var s=a.serialize(e),d=e.getAttribute("style")||"";e.getAttribute("width")&&(d="width:"+e.getAttribute("width")+"px;"+d),e.getAttribute("height")&&(d="height:"+e.getAttribute("height")+"px;"+d);var o=l.trim(e.getAttribute("class")),h={"class":t+" "+o,src:_,_ke_real_element:encodeURIComponent(s),_ke_real_node_type:e.nodeType+"",style:d,align:e.getAttribute("align")||""};return n&&(delete n.width,delete n.height,l.mix(h,n,!1)),r&&(h._ke_real_element_type=r),i&&(h._ke_resizable="_ke_resizable"),new a.Tag("img",h)}}))}}});