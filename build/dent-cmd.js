define("kg/editor-plugins/1.1.5/dent-cmd",["editor","./list-utils","dom","node","ua"],function(e,n,t){function a(e){return e.nodeType===u.NodeType.ELEMENT_NODE&&"li"===u.nodeName(e)}function r(e,n,t){for(var a=e.startContainer,r=e.endContainer;a&&!a.parent().equals(n);)a=a.parent();for(;r&&!r.parent().equals(n);)r=r.parent();if(a&&r){for(var o=a,i=[],d=!1;!d;)o.equals(r)&&(d=!0),i.push(o),o=o.next();if(!(i.length<1)){var l=n._4eParents(!0,void 0);l.each(function(e,n){l[n]=e});for(var m=0;m<l.length;m++)if(f[l[m].nodeName()]){n=l[m];break}var h="indent"===t?1:-1,y=i[0],g=i[i.length-1],E={},C=c.listToArray(n,E),T=C[g.data("listarray_index")].indent;for(m=y.data("listarray_index");m<=g.data("listarray_index");m++){C[m].indent+=h;var k=C[m].parent;C[m].parent=p(k[0].ownerDocument.createElement(k.nodeName()))}for(m=g.data("listarray_index")+1;m<C.length&&C[m].indent>T;m++)C[m].indent+=h;var _,M=c.arrayToList(C,E,null,"p"),A=[];if("outdent"===t&&(_=n.parent())&&"li"===_.nodeName()){var L,B=M.listNode.childNodes,D=B.length;for(m=D-1;m>=0;m--)(L=p(B[m]))&&"li"===L.nodeName()&&A.push(L)}if(M&&(u.insertBefore(M.listNode[0]||M.listNode,n[0]||n),n.remove()),A&&A.length)for(m=0;m<A.length;m++){for(var O=A[m],b=O;(b=b.next())&&b.nodeName()in f;)N.ie&&!O.first(function(e){return v(e)&&x(e)},1)&&O[0].appendChild(e.document.createTextNode("Â ")),O[0].appendChild(b[0]);u.insertAfter(O[0],_[0])}s.Utils.clearAllMarkers(E)}}}function o(e,n){var t,a=e.createIterator();for(a.enforceRealBlocks=!0,a.enlargeBr=!0;t=a.getNextParagraph();)i(t,n)}function i(e,n){var t=parseInt(e.style(h),10);return isNaN(t)&&(t=0),t+=("indent"===n?1:-1)*y,0>t?!1:(t=Math.max(t,0),t=Math.ceil(t/y)*y,e.css(h,t?t+g:""),""===e[0].style.cssText&&e.removeAttr("style"),!0)}function d(e,n){var t=e.getSelection(),d=t&&t.getRanges()[0];if(d){for(var l=d.startContainer,s=d.endContainer,c=d.getCommonAncestor(),p=c;p&&(p[0].nodeType!==u.NodeType.ELEMENT_NODE||!f[p.nodeName()]);)p=p.parent();var N;p&&l[0].nodeType===u.NodeType.ELEMENT_NODE&&l.nodeName()in f&&(N=new m(d),N.evaluator=a,d.startContainer=N.next()),p&&s[0].nodeType===u.NodeType.ELEMENT_NODE&&s.nodeName()in f&&(N=new m(d),N.evaluator=a,d.endContainer=N.previous());var v=t.createBookmarks(!0);if(p){for(var h=p.first();h&&"li"!==h.nodeName();)h=h.next();var y=d.startContainer,g=h[0]===y[0]||h.contains(y);g&&i(p,n)||r(d,p,n)}else o(d,n);t.selectBookmarks(v)}}function l(e,n){e.hasCommand(n)||e.addCommand(n,{exec:function(e){e.execCommand("save"),d(e,n),e.execCommand("save"),e.notifySelectionChange()}})}var s=e("editor"),c=e("./list-utils"),f={ol:1,ul:1},m=s.Walker,u=e("dom"),p=e("node"),N=e("ua"),v=m.whitespaces(!0),h="margin-left",y=40,g="px",x=m.bookmark(!1,!0);t.exports={checkOutdentActive:function(e){var n=e.blockLimit;if(e.contains(f))return!0;var t=e.block||n;return t&&t.style(h)},addCommand:l}});