define("kg/editor-plugins/1.1.4/xiami-music",["editor","./flash-common/base-class","./flash-common/utils","./fake-objects","./button","util"],function(t,e,i){function r(){r.superclass.constructor.apply(this,arguments)}function n(t){this.config=t||{}}var a=t("editor"),o=t("./flash-common/base-class"),s=t("./flash-common/utils"),l=t("./fake-objects");t("./button");var u=t("util"),c="ke_xiami",m="xiami-music";u.extend(r,o,{_updateTip:function(t,e){var i=this,r=i.get("editor"),n=r.restoreRealElement(e);n&&(t.html(e.attr("title")),t.attr("href",i._getFlashUrl(n)))}}),n.prototype={pluginRenderUI:function(t){function e(t){return/xiami\.com/i.test(t)}l.init(t);var i=t.htmlDataProcessor,n=i&&i.dataFilter;n&&n.addRules({tags:{object:function(t){var r,n,a=t.getAttribute("title"),o=t.getAttribute("classid"),l=t.childNodes;if(!o){for(r=0;r<l.length;r++)if(n=l[r],"embed"===n.nodeName){if(!s.isFlashEmbed(n))return null;if(e(n.attributes.src))return i.createFakeParserElement(t,c,m,!0,{title:a})}return null}for(r=0;r<l.length;r++)if(n=l[r],"param"===n.nodeName&&"movie"===n.getAttribute("name").toLowerCase()&&e(n.getAttribute("value")||n.getAttribute("VALUE")))return i.createFakeParserElement(t,c,m,!0,{title:a})},embed:function(t){return s.isFlashEmbed(t)&&e(t.getAttribute("src"))?i.createFakeParserElement(t,c,m,!0,{title:t.getAttribute("title")}):void 0}}},4);var o=new r({editor:t,cls:c,type:m,bubbleId:"xiami",pluginConfig:this.config,contextMenuId:"xiami",contextMenuHandlers:{"虾米属性":function(){var t=this.get("editorSelectedEl");t&&o.show(t)}}});t.addButton("xiamiMusic",{tooltip:"插入虾米音乐",listeners:{click:function(){o.show()}},mode:a.Mode.WYSIWYG_MODE})}},i.exports=n});