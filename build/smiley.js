define("kg/editor-plugins/1.1.4/smiley",["editor","./overlay","./button","node","util"],function(e,t,i){function n(){}var o=e("editor"),s=e("./overlay");e("./button");for(var l=e("node"),r=e("util"),a='<div class="{prefixCls}editor-smiley-sprite">',d=0;98>=d;d++)a+='<a href="javascript:void(0)" data-icon="http://a.tbcdn.cn/sys/wangwang/smiley/48x48/'+d+'.gif"></a>';a+="</div>",n.prototype={pluginRenderUI:function(e){var t=e.get("prefixCls");e.addButton("smiley",{tooltip:"插入表情",checkable:!0,listeners:{afterSyncUI:function(){var e=this;e.on("blur",function(){setTimeout(function(){e.smiley&&e.smiley.hide()},150)})},click:function(){var i,n=this,d=n.get("checked");d?((i=n.smiley)||(i=n.smiley=new s({content:r.substitute(a,{prefixCls:t}),focus4e:!1,width:300,elCls:t+"editor-popup",zIndex:o.baseZIndex(o.ZIndexManager.POPUP_MENU),mask:!1}).render(),i.get("el").on("click",function(t){var i,n=l(t.target);if("a"===n.nodeName()&&(i=n.attr("data-icon"))){var o=l('<img alt="" src="'+i+'"/>',e.get("document")[0]);e.insertElement(o)}}),i.on("hide",function(){n.set("checked",!1)})),i.set("align",{node:this.get("el"),points:["bl","tl"],overflow:{adjustX:1,adjustY:1}}),i.show()):n.smiley&&n.smiley.hide()},destroy:function(){this.smiley&&this.smiley.destroy()}},mode:o.Mode.WYSIWYG_MODE})}},i.exports=n});