define("kg/editor-plugins/1.1.3/remove-format/cmd",["editor","dom"],function(e,o,a){function t(e,o){for(var a=0;a<o.length;a++)e.removeAttr(o[a])}var n=e("editor"),r=n.RangeType,s=n.ElementPath,d=e("dom"),m="b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var,s",i="class,style,lang,width,height,align,hspace,valign".split(/,/),l=new RegExp("^(?:"+m.replace(/,/g,"|")+")$","i");a.exports={init:function(e){e.hasCommand("removeFormat")||e.addCommand("removeFormat",{exec:function(){e.focus(),l.lastIndex=0;var o=e.getSelection().getRanges();e.execCommand("save");for(var a,n=0;a=o[n];n++)if(!a.collapsed){a.enlarge(r.ENLARGE_ELEMENT);var m=a.createBookmark(),c=m.startNode,v=m.endNode,g=function(e){for(var o,a=new s(e),t=a.elements,n=1;(o=t[n])&&(!o.equals(a.block)&&!o.equals(a.blockLimit));n++)l.test(o.nodeName())&&e._4eBreakParent(o)};g(c),g(v);for(var N=c._4eNextSourceNode(!0,d.NodeType.ELEMENT_NODE,void 0,void 0);N&&!N.equals(v);){var f=N._4eNextSourceNode(!1,d.NodeType.ELEMENT_NODE,void 0,void 0);("img"!==N.nodeName()||!N.attr("_ke_real_element")&&!/\bke_/.test(N[0].className))&&(l.test(N.nodeName())?N._4eRemove(!0):t(N,i)),N=f}a.moveToBookmark(m)}e.getSelection().selectRanges(o),e.execCommand("save")}})}}});