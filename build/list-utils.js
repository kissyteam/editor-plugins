define("kg/editor-plugins/1.1.5/list-utils",["node","dom","ua"],function(e,n,t){var r={ol:1,ul:1},a=e("node"),d=e("dom"),o=d.NodeType,l=e("ua"),i={listToArray:function(e,n,t,o,l){if(!r[e.nodeName()])return[];o||(o=0),t||(t=[]);for(var p=0,N=e[0].childNodes.length;N>p;p++){var s=a(e[0].childNodes[p]);if("li"===s.nodeName()){var u={parent:e,indent:o,element:s,contents:[]};l?u.grandparent=l:(u.grandparent=e.parent(),u.grandparent&&"li"===u.grandparent.nodeName()&&(u.grandparent=u.grandparent.parent())),n&&s._4eSetMarker(n,"listarray_index",t.length,void 0),t.push(u);for(var h,m=0,c=s[0].childNodes.length;c>m;m++)h=a(s[0].childNodes[m]),h[0].nodeType===d.NodeType.ELEMENT_NODE&&r[h.nodeName()]?i.listToArray(h,n,t,o+1,u.grandparent):u.contents.push(h)}}return t},arrayToList:function(e,n,t,p){if(t||(t=0),!e||e.length<t+1)return null;for(var N,s=e[t].parent[0].ownerDocument,u=s.createDocumentFragment(),h=null,m=t,c=Math.max(e[t].indent,0),E=null;;){var T=e[m];if(T.indent===c){for(h&&e[m].parent.nodeName()===h.nodeName()||(h=e[m].parent.clone(!1),u.appendChild(h[0])),E=h[0].appendChild(T.element.clone(!1)[0]),N=0;N<T.contents.length;N++)E.appendChild(T.contents[N].clone(!0)[0]);m++}else if(T.indent===Math.max(c,0)+1){var g=i.arrayToList(e,null,m,p);E.appendChild(g.listNode),m=g.nextIndex}else{if(-1!==T.indent||t||!T.grandparent)return null;for(r[T.grandparent.nodeName()]?E=T.element.clone(!1)[0]:"td"!==T.grandparent.nodeName()?(E=s.createElement(p),T.element._4eCopyAttributes(a(E))):E=s.createDocumentFragment(),N=0;N<T.contents.length;N++){var f=T.contents[N].clone(!0);E.nodeType===o.DOCUMENT_FRAGMENT_NODE&&T.element._4eCopyAttributes(a(f)),E.appendChild(f[0])}if(E.nodeType===o.DOCUMENT_FRAGMENT_NODE&&m!==e.length-1&&(E.lastChild&&E.lastChild.nodeType===d.NodeType.ELEMENT_NODE&&"_moz"===E.lastChild.getAttribute("type")&&d._4eRemove(E.lastChild),d._4eAppendBogus(E)),E.nodeType===d.NodeType.ELEMENT_NODE&&d.nodeName(E)===p&&E.firstChild){d._4eTrim(E);var y=E.firstChild;if(y.nodeType===d.NodeType.ELEMENT_NODE&&d._4eIsBlockBoundary(y)){var _=s.createDocumentFragment();d._4eMoveChildren(E,_),E=_}}var C=d.nodeName(E);l.ie||"div"!==C&&"p"!==C||d._4eAppendBogus(E),u.appendChild(E),h=null,m++}if(e.length<=m||Math.max(e[m].indent,0)<c)break}if(n)for(var v=a(u.firstChild);v&&v[0];)v[0].nodeType===d.NodeType.ELEMENT_NODE&&v._4eClearMarkers(n,!0),v=v._4eNextSourceNode();return{listNode:u,nextIndex:m}}};t.exports=i});